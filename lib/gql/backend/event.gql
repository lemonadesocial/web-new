query GetEvent($id: MongoID, $shortid: String) {
  getEvent(_id: $id, shortid: $shortid) {
    _id
    title
    description
    approval_required
    start
    end
    shortid
    host_expanded {
      ...User
    }
    accepted
    new_new_photos_expanded {
      _id
      stamp
      type
      url
      size
      bucket
      key
    }
    address {
      street_1
      city
      title
      region
      country
      additional_directions

      latitude
      longitude
    }
    address_directions
    subevent_enabled
    sessions {
      _id
      start
      end
      broadcast
      description
      title
      broadcast
      photos_expanded {
        _id
        key
        bucket
      }
      speaker_users
      speaker_users_expanded {
        ...User
      }
    }
    space
    timezone
  }
}

query GetEvents(
  $subeventParent: MongoID
  $skip: Int = 0
  $limit: Int = 100
  $id: [MongoID!]
  $site: MongoID
  $search: String
  $accepted: MongoID
  $highlight: Boolean
  $unpublished: Boolean
  $startFrom: DateTimeISO
  $startTo: DateTimeISO
  $endFrom: DateTimeISO
  $hostFilter: HostFilter
  $sort: EventSortInput
) {
  getEvents(
    subevent_parent: $subeventParent
    skip: $skip
    limit: $limit
    _id: $id
    site: $site
    search: $search
    accepted: $accepted
    highlight: $highlight
    unpublished: $unpublished
    start_from: $startFrom
    start_to: $startTo
    end_from: $endFrom
    host_filter: $hostFilter
    sort: $sort
  ) {
    _id
    shortid
    title
    host
    host_expanded {
      _id
      name
      new_photos_expanded(limit: 1) {
        _id
        key
        bucket
      }
    }
    cohosts
    cohosts_expanded {
      _id
      name
      new_photos_expanded(limit: 1) {
        _id
        key
        bucket
      }
    }
    new_new_photos_expanded(limit: 1) {
      _id
      key
      bucket
      url
      type
    }
    start
    end
    timezone
    event_ticket_types {
      _id
      prices {
        cost
        currency
        default
        payment_accounts
      }
    }
    broadcasts {
      provider_id
    }
    address {
      title
      city
      title
      region
      additional_directions
    }
    accepted
    sessions {
      _id
      broadcast
      description
      end
      speaker_users
      speaker_users_expanded {
        _id
        name
        new_photos_expanded(limit: 1) {
          _id
          key
          bucket
        }
      }
      start
      title
    }
    subevent_parent_expanded {
      _id
      shortid
      title
      slug
      start
      timezone
      new_new_photos_expanded(limit: 1) {
        _id
        key
        bucket
        type
        url
      }
      subevent_settings {
        ticket_required_for_creation
        ticket_required_for_purchase
      }
    }
  }
}

query getEventInvitation($event: MongoID!) {
  getEventInvitation(event: $event) {
    _id
    inviters
  }
}

query getEventTicketTypes($event: MongoID!) {
  getEventTicketTypes(input: { event: $event }) {
    ticket_types {
      _id
      title
      default
      description
      event
      limited
      limit
      prices {
        cost
        currency
        default
        payment_accounts
        payment_accounts_expanded {
          ...PaymentAccount
        }
      }
      whitelisted
      photos_expanded(limit: 1) {
        _id,
        key,
        bucket
      }
      category
      category_expanded {
        _id
        description
        title
        position
      }
      position
    }
  }
}

query CalculateTicketsPricing($input: CalculateTicketsPricingInput!) {
  calculateTicketsPricing(input: $input) {
    deposit_infos {
      minimum_amount
      minimum_percent
    }
    discount
    payment_accounts {
      _id
      account_info {
        ... on SolanaAccount {
          currencies
          currency_map
          address
          network
        }
        ... on EthereumAccount {
          currencies
          currency_map
          address
          network
        }
        ... on SafeAccount {
          currencies
          currency_map
          address
          network
          owners
          threshold
          pending
        }
        ... on DigitalAccount {
          currencies
          currency_map
          account_id
        }
        ... on StripeAccount {
          currencies
          currency_map
          account_id
          publishable_key
        }
        ... on EthereumEscrowAccount {
          currencies
          currency_map
          address
          network
          minimum_deposit_percent
          host_refund_percent
          refund_policies {
            percent
            timestamp
          }
        }
        ... on EthereumRelayAccount {
          currencies
          currency_map
          address
          network
          payment_splitter_contract
        }
        ... on EthereumStakeAccount {
          currencies
          currency_map
          address
          network
          config_id
          requirement_checkin_before
        }
      }
      active
      created_at
      escrow {
        minimum_amount
        minimum_percent
      }
      fee
      provider
      relay {
        payment_splitter_contract
      }
      title
      type
      user
    }
    subtotal
    total
  }
}

query getTickets ($event: MongoID, $user: MongoID, $ticket_types: [MongoID!], $email: String) {
  getTickets(event: $event, user: $user, ticket_types: $ticket_types, email: $email) {
    _id
    accepted
    assigned_email
    assigned_to
    assigned_to_expanded {
      _id,
      name,
      new_photos_expanded(limit: 1) {
        _id
        key
        bucket
      }
    }
    event
    invited_by
    type
    type_expanded {
      _id
      title
    }
    shortid
  }
}

query getMyEventJoinRequest($event: MongoID!) {
  getMyEventJoinRequest(event: $event) {
    _id
    created_at
    decided_at
    decided_by
    decided_by_expanded {
      _id
      display_name
      image_avatar
      username
      wallets
    }
    state
    payment {
      _id
      state
    }
    requested_tickets {
      count
      ticket_type
    }
    ticket_types_expanded {
      _id
      title
    }
  }
}
