fragment SpaceFragment on Space {
  _id
  title
  admins {
    _id
    image_avatar
  }
  description
  is_ambassador
  followed
  followers
  image_avatar
  image_avatar_expanded {
    _id
    bucket
    url
    type
    key
  }
  image_cover
  image_cover_expanded {
    _id
    bucket
    url
    type
    key
  }
  creator
  creator_expanded {
    _id
    name
    image_avatar
  }
  slug
  private
  listed_events
  website
  address {
    _id
    city
    country
    latitude
    longitude
    street_1
    street_2
    region
    title
  }
  handle_instagram
  handle_twitter
  handle_linkedin
  handle_youtube
  handle_tiktok
  personal
}

fragment SpaceTagFragment on SpaceTagBase {
  _id
  color
  space
  tag
  targets
  type
}

# Queries

query GetSpace($id: MongoID, $slug: String) {
  getSpace(_id: $id, slug: $slug) {
    ...SpaceFragment
  }
}

query GetSpaceEvents(
  $skip: Int
  $limit: Int
  $startFrom: DateTimeISO
  $startTo: DateTimeISO
  $space: MongoID
  $sort: EventSortInput
  $endFrom: DateTimeISO
  $endTo: DateTimeISO
  $spaceTags: [MongoID!]
) {
  getEvents(
    skip: $skip
    limit: $limit
    start_from: $startFrom
    start_to: $startTo
    space: $space
    sort: $sort
    end_from: $endFrom
    end_to: $endTo
    space_tags: $spaceTags
  ) {
    _id
    shortid
    title
    host_expanded {
      _id
      image_avatar
      name
    }
    address {
      city
      country
      region
    }
    new_new_photos_expanded {
      _id
      bucket
      key
      type
      url
    }
    start
    end
    event_ticket_types {
      _id
      prices {
        cost
        currency
        default
      }
    }
  }
}

# NOTE: This will get all events of space to display on calendar
query GetSpaceEventsCalendar($space: MongoID) {
  getEvents(space: $space) {
    _id
    start
    address {
      _id
      latitude
      longitude
    }
  }
}

query GetSpaceTags($space: MongoID!) {
  listSpaceTags(space: $space) {
    ...SpaceTagFragment
  }
}
